<!DOCTYPE html>
<html>
  <head>
    <title>Host Game <%= game_id %> - GuessAlpha</title>
    <style>
    </style>
  </head>
  <body>
    <h1>GAME <%= game_id %></h1>
    <div id="content">
        <p>Waiting for players...</p>
        <div id="users">
            <h2>Players</h2>
        </div>
    </div>
    <button onclick="startRound()">Start Game</button>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();
        var round = 0;
        var roundData = {}
        socket.on('user joined', function(user, that_game_id) {
            if (that_game_id == <%= game_id %>){
                const theDiv = document.getElementById("users")
                var content = document.createTextNode(user);
                theDiv.appendChild(content); 
            }
        })
        socket.on('submit number', function(user, that_game_id, number) {
            if (that_game_id == <%= game_id %>){
                roundData[user] = parseInt(number);
                console.log(roundData)
            }
        })
        function startRound(){
            socket.emit('round', <%= game_id %>);
            round ++;
            roundData = {}
            document.getElementById("content").innerHTML = `<p>Round ${round}</p>`
        }
    </script>
  </body>
</html>